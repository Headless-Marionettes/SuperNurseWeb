"use strict";var patientArray,load=function(){var n=window.localStorage.getItem("language");"ru"==n?$('[lang="en"]').hide():$('[lang="ru"]').hide(),$.ajaxSetup({beforeSend:function(e){console.log("before send");var a="JWT "+window.localStorage.getItem("token");console.log(a),e.setRequestHeader("Authorization",a)}}),$.ajax({url:"https://super-nurse.herokuapp.com/patients",action:"GET",context:document.body,crossDomain:!0,success:function(e){patientArray=e;for(var a=0;a<e.length;a++)$("#patients").append('<div class="card-wrapper">\n                    <a class="card-link row" href="patient-profile.html?id='+e[a]._id+'">\n                        <div class="image-wraper col-6 col-sm-12">\n                            <img src="./images/senior-placeholder.jpg" alt="" class="img-fluid">\n                        </div>\n                        <div class="content col-6 col-sm-12">\n                            <p id="FullNameID" class="name subheading">'+e[a].first_name+" "+e[a].last_name+'</p>\n                            <div class="details">\n                                <div class="details-row">\n                                    <p class="details-label"><span lang="en">DOB: </span><span lang="ru">ДР: </span></p>\n                                    <p id="DateOfBirth" class="details-value">'+e[a].date_of_birth+'</p>\n                                </div>\n                                <div class="details-row">\n                                    <p class="details-label"><span lang="en">Room: </span><span lang="ru">Палата: </span></p>\n                                    <p id="Room" class="details-value">'+e[a].room+"</p>\n                                </div>\n                            </div>\n                        </div>\n                    </a>\n                </div>");"ru"==n?$('[lang="en"]').hide():$('[lang="ru"]').hide()}}).fail(function(){$("#patients").html("error")})};$("#filters").ready(function(){$(".btn").click(function(e){e.preventDefault()});var t=$("#male:checked").length,l=$("#female:checked").length,s=$("#age1:checked").length,r=$("#age2:checked").length,c=$("#age3:checked").length,i=$("#age4:checked").length,o=$("#age5:checked").length;$("#filters input").change(function(){t=$("#male:checked").length,l=$("#female:checked").length,s=$("#age1:checked").length,r=$("#age2:checked").length,c=$("#age3:checked").length,i=$("#age4:checked").length,o=$("#age5:checked").length,$("#patients").empty();for(var e=(new Date).getFullYear(),a=0;a<patientArray.length;a++){var n=e-patientArray[a].date_of_birth.match(/[0-9]{4}$/g);console.log(n),("F"==patientArray[a].sex&&l||"M"==patientArray[a].sex&&t)&&(n<=60&&s||60<n&&n<=70&&r||70<n&&n<=80&&c||80<n&&n<=90&&i||90<n&&o)&&$("#patients").append('<div class="card-wrapper">\n                    <a class="card-link row" href="patient-profile.html?id='+patientArray[a]._id+'">\n                        <div class="image-wraper col-6 col-sm-12">\n                            <img src="./images/senior-placeholder.jpg" alt="" class="img-fluid">\n                        </div>\n                        <div class="content col-6 col-sm-12">\n                            <p id="FullNameID" class="name subheading">'+patientArray[a].first_name+" "+patientArray[a].last_name+'</p>\n                            <div class="details">\n                                <div class="details-row">\n                                    <p class="details-label">DOB: </p>\n                                    <p id="DateOfBirth" class="details-value">'+patientArray[a].date_of_birth+'</p>\n                                </div>\n                                <div class="details-row">\n                                    <p class="details-label">Room: </p>\n                                    <p id="Room" class="details-value">'+patientArray[a].room+"</p>\n                                </div>\n                            </div>\n                        </div>\n                    </a>\n                </div>")}$("#sort input").trigger("change")})}),$("#sort").ready(function(){var l=$("#sort-fn-asc:checked").length,s=$("#sort-fn-desc:checked").length,r=$("#sort-ln-asc:checked").length,c=$("#sort-ln-desc:checked").length;$("#sort input").change(function(){l=$("#sort-fn-asc:checked").length,s=$("#sort-fn-desc:checked").length,r=$("#sort-ln-asc:checked").length,c=$("#sort-ln-desc:checked").length;var e=$(".card-wrapper").toArray();e.sort(function(e,a){var n=e.querySelector("#FullNameID").innerHTML,t=a.querySelector("#FullNameID").innerHTML;return(r||c)&&(n=n.match(/(\w+)$/g),t=t.match(/(\w+)$/g)),n<t&&(l||r)||t<n&&(s||c)?-1:t<n&&(l||r)||n<t&&(s||c)?1:0});var n=$("#patients");$.each(e,function(e,a){n.append(a)})})});var searchPatient=function(){var s=$("#search-input").val().toLowerCase();$(".card-wrapper").each(function(e,a){var n=a.querySelector("#FullNameID").innerHTML,t=a.querySelector("#DateOfBirth").innerHTML,l=a.querySelector("#Room").innerHTML;n.toLowerCase().includes(s)||t.toLowerCase().includes(s)||l.toLowerCase().includes(s)?a.style.display="block":a.style.display="none"})};$("#search-input").on("input",function(e){searchPatient()});