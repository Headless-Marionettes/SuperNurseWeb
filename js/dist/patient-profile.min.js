"use strict";var load=function(){$.ajaxSetup({beforeSend:function(e){console.log("before send");var t="JWT "+window.localStorage.getItem("token");console.log(t),e.setRequestHeader("Authorization",t)}});var e=new URL(window.location.href).searchParams.get("id");console.log(e),$.ajax({url:"https://super-nurse.herokuapp.com/patients/"+e,action:"GET",context:document.body,crossDomain:!0,success:function(e){$("#patient-name").html(e[0].first_name+" "+e[0].last_name),$("#patient-room").html(e[0].room),$("#patient-birth").html(e[0].date_of_birth),$("#patient-height").html(e[0].height),$("#patient-weight").html(e[0].weight),$("#patient-allergies").html(e[0].alergies)},error:function(){$("#patient-name").html("error"),$("#patient-room").html("error"),$("#patient-birth").html("error"),$("#patient-height").html("error"),$("#patient-weight").html("error"),$("#patient-allergies").html("error")}}),$.ajax({url:"https://super-nurse.herokuapp.com/patients/"+e+"/records",action:"GET",context:document.body,crossDomain:!0,success:function(e){0==e.length&&$("#listReports").append("<h2>There are no reports</h2>");for(var t=e.length-1;0<=t;t--)$("#listReports").append('<div class="shadow border rounded p-3 mb-3">\n                    <h3 class="text-dark-primary"><span lang="en">Report from: </span><span lang="ru">Отчет от: </span>'+e[t].date+'</h3>\n                    <div class="row">\n                        <div class="col-md font-weight-bold mt-4"><span lang="en">Blood Pressure: </span><span lang="ru">Давление: </span>'+e[t].blood_pressure+'</div>\n                        <div class="col-md font-weight-bold mt-4"><span lang="en">Respiratory Rate: </span><span lang="ru">Частота дыхания: </span>'+e[t].respiratory_rate+'</div>\n                    </div>\n                    <div class="row">\n                        <div class="col-md font-weight-bold mt-4"><span lang="en">Blood Oxygen: </span><span lang="ru">Кислород в крови: </span>'+e[t].blood_oxygen_level+'</div>\n                        <div class="col-md font-weight-bold mt-4"><span lang="en">Heart Beat Rate: </span><span lang="ru">Пульс: </span>'+e[t].heart_beat_rate+'</div>\n                    </div>\n                    <div class="row">\n                        <div class="col-md font-weight-bold mt-4"><span lang="en">Additional Information: </span><span lang="ru">Доп информация: </span>'+e[t].additional_info+"</div>\n                    </div>\n                </div>"),$('[lang="ru"]').hide()},error:function(){$("#listReports").html("Error")}})};$("#new-report-form").ready(function(){$("#new-report-form").submit(function(e){e.preventDefault(),$.ajaxSetup({beforeSend:function(e){console.log("before send");var t="JWT "+window.localStorage.getItem("token");console.log(t),e.setRequestHeader("Authorization",t)}});var t="https://super-nurse.herokuapp.com/patients/"+(t=new URL(window.location.href)).searchParams.get("id")+"/records";console.log(t);var n=$(this).serialize(),o=new Date,a=o.getDate(),r=o.getMonth()+1;a<10&&(a="0"+a),r<10&&(r="0"+r),n+="&date="+(o=a+"/"+r+"/"+o.getFullYear()),console.log(n),$.ajax({type:"POST",url:t,data:n,success:function(){console.log("Report added"),location.reload()},error:function(){console.log("Error adding report")}})})});